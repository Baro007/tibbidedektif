// Ã‡oklu Dil DesteÄŸi - Multi-Language Support
// TÄ±bbi Dedektiflik Website Language System

const translations = {
    tr: {
        // Meta & Head
        pageTitle: "ðŸ©º TÄ±bbi Dedektiflik - Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel | GÃ¼venilir SaÄŸlÄ±k DanÄ±ÅŸmanlÄ±ÄŸÄ±",
        metaDescription: "Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel ile TÄ±bbi Dedektiflik - GÃ¼venilir saÄŸlÄ±k danÄ±ÅŸmanlÄ±ÄŸÄ± ve ikinci gÃ¶rÃ¼ÅŸ hizmeti. Ãœcretsiz, online ve profesyonel.",
        metaKeywords: "tÄ±bbi danÄ±ÅŸmanlÄ±k, saÄŸlÄ±k, doktor, ikinci gÃ¶rÃ¼ÅŸ, tÄ±p, saÄŸlÄ±k rehberliÄŸi",
        
        // Navigation & UI
        languageSelector: "Dil SeÃ§imi",
        currentLanguage: "TÃ¼rkÃ§e",
        switchToEnglish: "Switch to English",
        
        // Hero Section
        heroTitle: "ðŸ©º TÄ±bbi Dedektiflik",
        heroSubtitle: "Sorunuzu getirin, birlikte iz sÃ¼relim.",
        heroTagline: "SaÄŸlÄ±k karmaÅŸÄ±k olabilir. Ama doÄŸru bilgiye ulaÅŸmak, bazen sadece bir bakÄ±ÅŸ aÃ§Ä±sÄ± kadar uzaktadÄ±r.",
        
        // Hero Badges
        badgeEvidenceBased: "ðŸ”¬ KanÄ±ta DayalÄ±",
        badgeTrustworthy: "ðŸ¤ GÃ¼venilir",
        badgeFree: "ðŸ’š Ãœcretsiz",
        
        // Introduction Section
        introTitle: "ðŸ§¡ GiriÅŸ â€” Bu sayfa neden var?",
        introGreeting: "Merhaba, ben Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel.",
        introP1: "Bu sayfayÄ±, \"internet Ã§ok karÄ±ÅŸÄ±k, hocam ne yapacaÄŸÄ±mÄ±zÄ± bilemiyoruz\" diyen tÃ¼m aileler ve bireyler iÃ§in hazÄ±rladÄ±m.",
        introP2: "benim iÃ§in sadece bir meslek deÄŸil â€” gerÃ§ek bir tutku.",
        introP3: "Bazen PubMed'deki en son araÅŸtÄ±rmalardan baÅŸlayÄ±p WHO verilerine, Ayurveda'dan Ã‡in tÄ±bbÄ±na kadar geniÅŸ bir yelpazede araÅŸtÄ±rma yapÄ±yorum. Hangi kaynaktan gelirse gelsin, doÄŸru bilgiyi bulmak ve sizlerle paylaÅŸmak benim hem zevk aldÄ±ÄŸÄ±m hem de sorumluluÄŸunu hissettiÄŸim bir iÅŸ.",
        introP4: "SÃ¼reÃ§ Ã§ok basit: Siz saÄŸlÄ±k sorununu benimle paylaÅŸÄ±yorsunuz, ben tÃ¼m kaynaklara dalÄ±p araÅŸtÄ±rÄ±yorum ve size anlaÅŸÄ±lÄ±r, pratik ve yol gÃ¶sterici bir Ã¶zet sunuyorum.",
        
        // How It Works Section
        howItWorksTitle: "ðŸ” Bu Sistem NasÄ±l Ä°ÅŸliyor?",
        
        // Step 1
        step1Title: "ðŸ“… 1. Randevu AlÄ±n",
        step1Description: "Google Takvim Ã¼zerinden SalÄ± veya Cuma gÃ¼nÃ¼ iÃ§in bir gÃ¶rÃ¼ÅŸme planlayÄ±n.",
        step1Detail1: "ðŸ•“ GÃ¶rÃ¼ÅŸmeler 30-45 dakika sÃ¼rer.",
        step1Detail2: "ðŸ“ GÃ¶rÃ¼ÅŸmeler online olarak Google Meet Ã¼zerinden yapÄ±lÄ±r.",
        
        // Step 2
        step2Title: "ðŸ“ 2. Sorunuzu YazÄ±n",
        step2Description: "Randevu formunda kÄ±saca sorununuzu anlatÄ±n.",
        step2Detail: "ðŸ’¡ Varsa tanÄ±lar, tetkikler, Ã¶nceki tedavilerden bahsedin.",
        
        // Step 3
        step3Title: "ðŸ”¬ 3. Ben AraÅŸtÄ±rayÄ±m",
        step3Description: "GÃ¶rÃ¼ÅŸme Ã¶ncesi ben:",
        step3Item1: "ðŸ“š LiteratÃ¼r tararÄ±m",
        step3Item2: "ðŸ“‹ GÃ¼ncel kÄ±lavuzlara bakarÄ±m",
        step3Item3: "ðŸŒ Alternatif gÃ¶rÃ¼ÅŸleri de gÃ¶zden geÃ§iririm",
        step3Item4: "ðŸ‘¨â€âš•ï¸ Klinik deneyimimle harmanlarÄ±m",
        
        // Step 4
        step4Title: "ðŸ’¬ 4. GÃ¶rÃ¼ÅŸme GerÃ§ekleÅŸsin",
        step4Description: "SadeleÅŸtirilmiÅŸ ama anlamlÄ± bir saÄŸlÄ±k yol haritasÄ± Ã§Ä±karÄ±rÄ±z.",
        
        // Step 5
        step5Title: "ðŸ“§ 5. Size Ã–zet & Kaynaklar GÃ¶nderirim",
        step5Description: "GÃ¶rÃ¼ÅŸme sonrasÄ± kaynaklarla desteklenmiÅŸ kÄ±sa bir Ã¶zet e-postayla gelir.",
        
        // Why Free Section
        whyFreeTitle: "ðŸ’š Neden Ãœcretsiz?",
        whyFreeP1: "Bu benim hem merak ettiÄŸim bir yolculuk, hem de Ã¶ÄŸrenme aracÄ±m.",
        whyFreeP2: "Siz vakayÄ± getiriyorsunuz, ben araÅŸtÄ±rÄ±yor ve sunuyorum.",
        whyFreeP3: "KarÅŸÄ±lÄ±ÄŸÄ±nda ben de kendimi geliÅŸtiriyor, paylaÅŸmanÄ±n huzurunu yaÅŸÄ±yorum.",
        whyFreeP4: "\"Almaâ€“verme dengesi\"ne inanan bir doktor olarak bu hizmeti sunmaktan mutluluk duyuyorum.",
        
        // Appointment Section
        appointmentTitle: "ðŸ—“ï¸ Randevu Al",
        appointmentSubtitle: "ðŸ“… TÄ±bbi Dedektiflik GÃ¶rÃ¼ÅŸmesi Ä°Ã§in Randevu Al",
        appointmentInfo: "SalÄ± & Cuma gÃ¼nleri â€” Ãœcretsiz & Online",
        appointmentNote: "âš¡ SÄ±nÄ±rlÄ± kontenjan. Åžeffaf, gÃ¼venli ve ticari amaÃ§lÄ± olmayan bir paylaÅŸÄ±m alanÄ±.",
        
        // FAQ Section
        faqTitle: "â“ SÄ±kÃ§a Sorulanlar (SSS)",
        
        // FAQ Item 1
        faq1Question: "ðŸ©º Bu bir muayene mi?",
        faq1Answer: "HayÄ±r, tanÄ± koymaz, reÃ§ete Ã¶nermez. Bilgilendirici rehberliktir.",
        
        // FAQ Item 2
        faq2Question: "ðŸ”’ Bilgilerim gizli mi kalacak?",
        faq2Answer: "Evet. TÃ¼m bilgiler sadece sen ve ben arasÄ±nda kalÄ±r. Ä°stersen anonimleÅŸtirilmiÅŸ vaka Ã¶zetinde paylaÅŸabilirim, izinle.",
        
        // FAQ Item 3
        faq3Question: "ðŸŽ¯ Hangi tÃ¼r sorular iÃ§in uygundur?",
        faq3Answer: "Karar veremediÄŸiniz sÃ¼reÃ§ler, belirsiz raporlar, ikinci gÃ¶rÃ¼ÅŸler iÃ§in idealdir.",
        
        // Schema Data
        schemaName: "TÄ±bbi Dedektiflik",
        schemaDescription: "Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel tarafÄ±ndan sunulan gÃ¼venilir saÄŸlÄ±k danÄ±ÅŸmanlÄ±ÄŸÄ± hizmeti",
        schemaJobTitle: "Doktor",
        schemaServiceType: "SaÄŸlÄ±k DanÄ±ÅŸmanlÄ±ÄŸÄ±",
        schemaAreaServed: "TÃ¼rkiye",
        schemaPriceRange: "Ãœcretsiz"
    },
    
    en: {
        // Meta & Head
        pageTitle: "ðŸ©º Medical Detective - Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel | Reliable Health Consultation",
        metaDescription: "Medical Detective with Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel - Reliable health consultation and second opinion service. Free, online and professional.",
        metaKeywords: "medical consultation, health, doctor, second opinion, medicine, health guidance",
        
        // Navigation & UI
        languageSelector: "Language Selection",
        currentLanguage: "English",
        switchToTurkish: "TÃ¼rkÃ§eye GeÃ§",
        
        // Hero Section
        heroTitle: "ðŸ©º Medical Detective",
        heroSubtitle: "Bring your question, let's track it together.",
        heroTagline: "Health can be complex. But reaching the right information is sometimes just a perspective away.",
        
        // Hero Badges
        badgeEvidenceBased: "ðŸ”¬ Evidence-Based",
        badgeTrustworthy: "ðŸ¤ Trustworthy",
        badgeFree: "ðŸ’š Free",
        
        // Introduction Section
        introTitle: "ðŸ§¡ Introduction â€” Why does this page exist?",
        introGreeting: "Hello, I am Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel.",
        introP1: "I created this page for all families and individuals who say \"the internet is so confusing, doctor, we don't know what to do.\"",
        introP2: "is not just a profession for me â€” it's a genuine passion.",
        introP3: "Sometimes I start with the latest research on PubMed and extend to WHO data, from Ayurveda to Chinese medicine, conducting research across a wide spectrum. Whatever the source, finding accurate information and sharing it with you is both something I enjoy and feel responsible for.",
        introP4: "The process is simple: You share your health concern with me, I dive deep into all available sources and provide you with a clear, practical and guiding summary.",
        
        // How It Works Section
        howItWorksTitle: "ðŸ” How Does This System Work?",
        
        // Step 1
        step1Title: "ðŸ“… 1. Make an Appointment",
        step1Description: "Schedule a meeting for Tuesday or Friday via Google Calendar.",
        step1Detail1: "ðŸ•“ Meetings last 30-45 minutes.",
        step1Detail2: "ðŸ“ Meetings are conducted online via Google Meet.",
        
        // Step 2
        step2Title: "ðŸ“ 2. Write Your Problem",
        step2Description: "Briefly describe your problem in the appointment form.",
        step2Detail: "ðŸ’¡ If available, mention diagnoses, tests, previous treatments.",
        
        // Step 3
        step3Title: "ðŸ”¬ 3. Let Me Research",
        step3Description: "Before the meeting, I:",
        step3Item1: "ðŸ“š Review the literature",
        step3Item2: "ðŸ“‹ Check current guidelines",
        step3Item3: "ðŸŒ Review alternative opinions",
        step3Item4: "ðŸ‘¨â€âš•ï¸ Combine with my clinical experience",
        
        // Step 4
        step4Title: "ðŸ’¬ 4. Let the Meeting Happen",
        step4Description: "We create a simplified but meaningful health roadmap.",
        
        // Step 5
        step5Title: "ðŸ“§ 5. I Send You Summary & Sources",
        step5Description: "After the meeting, a brief summary supported by sources comes via email.",
        
        // Why Free Section
        whyFreeTitle: "ðŸ’š Why Free?",
        whyFreeP1: "This is both a journey I'm curious about and my learning tool.",
        whyFreeP2: "You bring the case, I research and present.",
        whyFreeP3: "In return, I also develop myself and experience the peace of sharing.",
        whyFreeP4: "As a doctor who believes in \"give-and-take balance\", I am happy to provide this service.",
        
        // Appointment Section
        appointmentTitle: "ðŸ—“ï¸ Make an Appointment",
        appointmentSubtitle: "ðŸ“… Make an Appointment for Medical Detective Consultation",
        appointmentInfo: "Tuesday & Friday â€” Free & Online",
        appointmentNote: "âš¡ Limited quota. Transparent, secure and non-commercial sharing space.",
        
        // FAQ Section
        faqTitle: "â“ Frequently Asked Questions (FAQ)",
        
        // FAQ Item 1
        faq1Question: "ðŸ©º Is this an examination?",
        faq1Answer: "No, it does not diagnose or suggest prescriptions. It is informational guidance.",
        
        // FAQ Item 2
        faq2Question: "ðŸ”’ Will my information remain confidential?",
        faq2Answer: "Yes. All information remains only between you and me. If you wish, I can share it in an anonymized case summary, with your permission.",
        
        // FAQ Item 3
        faq3Question: "ðŸŽ¯ What types of questions is it suitable for?",
        faq3Answer: "It is ideal for processes you can't decide on, unclear reports, second opinions.",
        
        // Schema Data
        schemaName: "Medical Detective",
        schemaDescription: "Reliable health consultation service provided by Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel",
        schemaJobTitle: "Doctor",
        schemaServiceType: "Health Consultation",
        schemaAreaServed: "Turkey",
        schemaPriceRange: "Free"
    }
};

// Language System Class
class LanguageSystem {
    constructor() {
        this.currentLanguage = this.detectLanguage();
        this.init();
    }
    
    detectLanguage() {
        // URL parametresinden dil kontrolÃ¼
        const urlParams = new URLSearchParams(window.location.search);
        const urlLang = urlParams.get('lang');
        
        if (urlLang && translations[urlLang]) {
            return urlLang;
        }
        
        // Local storage'dan dil kontrolÃ¼
        const savedLang = localStorage.getItem('preferredLanguage');
        if (savedLang && translations[savedLang]) {
            return savedLang;
        }
        
        // Browser dilinden algÄ±lama
        const browserLang = navigator.language || navigator.userLanguage;
        const langCode = browserLang.substring(0, 2);
        
        if (translations[langCode]) {
            return langCode;
        }
        
        // VarsayÄ±lan TÃ¼rkÃ§e
        return 'tr';
    }
    
    init() {
        this.createLanguageSelector();
        this.translatePage();
        this.updateURL();
        
        // Browser history iÃ§in
        window.addEventListener('popstate', () => {
            this.currentLanguage = this.detectLanguage();
            this.translatePage();
        });
    }
    
    createLanguageSelector() {
        // Language selector oluÅŸtur
        const header = document.querySelector('.hero .container');
        if (!header) return;
        
        const languageSelector = document.createElement('div');
        languageSelector.className = 'language-selector';
        languageSelector.innerHTML = `
            <div class="lang-dropdown">
                <button class="lang-current" aria-label="${translations[this.currentLanguage].languageSelector}">
                    <span class="lang-flag">${this.currentLanguage === 'tr' ? 'ðŸ‡¹ï¿½ï¿½' : 'ðŸ‡ºðŸ‡¸'}</span>
                    <span class="lang-text">${translations[this.currentLanguage].currentLanguage}</span>
                    <span class="lang-arrow">â–¼</span>
                </button>
                <div class="lang-options">
                    <button class="lang-option" data-lang="tr" ${this.currentLanguage === 'tr' ? 'aria-current="true"' : ''}>
                        <span class="lang-flag">ðŸ‡¹ðŸ‡·</span>
                        <span class="lang-text">TÃ¼rkÃ§e</span>
                    </button>
                    <button class="lang-option" data-lang="en" ${this.currentLanguage === 'en' ? 'aria-current="true"' : ''}>
                        <span class="lang-flag">ðŸ‡ºðŸ‡¸</span>
                        <span class="lang-text">English</span>
                    </button>
                </div>
            </div>
        `;
        
        // Header'Ä±n baÅŸÄ±na ekle
        header.insertBefore(languageSelector, header.firstChild);
        
        // Event listeners
        const dropdown = languageSelector.querySelector('.lang-dropdown');
        const currentBtn = dropdown.querySelector('.lang-current');
        const options = dropdown.querySelectorAll('.lang-option');
        
        currentBtn.addEventListener('click', () => {
            dropdown.classList.toggle('open');
        });
        
        options.forEach(option => {
            option.addEventListener('click', (e) => {
                const newLang = e.currentTarget.dataset.lang;
                if (newLang !== this.currentLanguage) {
                    this.switchLanguage(newLang);
                }
                dropdown.classList.remove('open');
            });
        });
        
        // DÄ±ÅŸarÄ± tÄ±klandÄ±ÄŸÄ±nda kapat
        document.addEventListener('click', (e) => {
            if (!dropdown.contains(e.target)) {
                dropdown.classList.remove('open');
            }
        });
    }
    
    switchLanguage(newLang) {
        if (!translations[newLang]) return;
        
        this.currentLanguage = newLang;
        localStorage.setItem('preferredLanguage', newLang);
        
        this.translatePage();
        this.updateURL();
        this.updateLanguageSelector();
        
        // Google Analytics event (eÄŸer varsa)
        if (typeof gtag !== 'undefined') {
            gtag('event', 'language_change', {
                'custom_parameter': newLang
            });
        }
    }
    
    translatePage() {
        const t = translations[this.currentLanguage];
        
        // Document title
        document.title = t.pageTitle;
        
        // Meta tags
        this.updateMetaTag('description', t.metaDescription);
        this.updateMetaTag('keywords', t.metaKeywords);
        this.updateMetaTag('og:title', t.pageTitle);
        this.updateMetaTag('og:description', t.metaDescription);
        this.updateMetaTag('twitter:title', t.pageTitle);
        this.updateMetaTag('twitter:description', t.metaDescription);
        
        // HTML lang attribute
        document.documentElement.lang = this.currentLanguage;
        
        // Hero section
        this.updateText('.hero h1', t.heroTitle);
        this.updateText('.hero .subtitle', t.heroSubtitle);
        this.updateText('.hero .tagline', t.heroTagline);
        
        // Hero badges
        const badges = document.querySelectorAll('.hero-badges .medical-badge');
        if (badges.length >= 3) {
            badges[0].textContent = t.badgeEvidenceBased;
            badges[1].textContent = t.badgeTrustworthy;
            badges[2].textContent = t.badgeFree;
        }
        
        // Introduction section
        this.updateHTML('#intro h2', t.introTitle);
        const introPs = document.querySelectorAll('#intro .intro-content p');
        if (introPs.length >= 5) {
            introPs[0].innerHTML = `<strong>${t.introGreeting}</strong>`;
            introPs[1].innerHTML = t.introP1.replace(
                /(internet Ã§ok karÄ±ÅŸÄ±k, hocam ne yapacaÄŸÄ±mÄ±zÄ± bilemiyoruz|the internet is so confusing, doctor, we don't know what to do)/g, 
                '<em>"$1"</em>'
            );
            introPs[2].innerHTML = `<strong>${this.currentLanguage === 'tr' ? 'TÄ±bbi Dedektiflik' : 'Medical Detective'}</strong> ${t.introP2.replace(/TÄ±bbi Dedektiflik|Medical Detective/, '')} â€” gerÃ§ek bir <em>${this.currentLanguage === 'tr' ? 'tutku' : 'passion'}</em>.`;
            introPs[3].innerHTML = t.introP3.replace(/(PubMed|WHO|Ayurveda|Ã‡in tÄ±bbÄ±na|Chinese medicine)/g, '<strong>$1</strong>');
            introPs[4].innerHTML = t.introP4.replace(/(anlaÅŸÄ±lÄ±r, pratik ve yol gÃ¶sterici|clear, practical and guiding)/g, '<strong>$1</strong>');
        }
        
        // How it works section
        this.updateHTML('#how-it-works h2', t.howItWorksTitle);
        
        // Steps
        const steps = document.querySelectorAll('.step');
        if (steps.length >= 5) {
            // Step 1
            this.updateHTML(steps[0].querySelector('h3'), t.step1Title);
            this.updateHTML(steps[0].querySelector('p'), t.step1Description.replace(/(SalÄ±|Cuma|Tuesday|Friday)/g, '<strong>$1</strong>'));
            const step1Details = steps[0].querySelectorAll('.step-details p small');
            if (step1Details.length >= 2) {
                step1Details[0].innerHTML = t.step1Detail1.replace(/(30-45 dakika|30-45 minutes)/g, '<strong>$1</strong>');
                step1Details[1].innerHTML = t.step1Detail2.replace(/(online|Google Meet)/g, '<strong>$1</strong>');
            }
            
            // Step 2
            this.updateHTML(steps[1].querySelector('h3'), t.step2Title);
            this.updateHTML(steps[1].querySelector('p'), t.step2Description);
            const step2Detail = steps[1].querySelector('.step-details p small');
            if (step2Detail) {
                step2Detail.innerHTML = t.step2Detail.replace(/(tanÄ±lar, tetkikler, Ã¶nceki tedaviler|diagnoses, tests, previous treatments)/g, '<strong>$1</strong>');
            }
            
            // Step 3
            this.updateHTML(steps[2].querySelector('h3'), t.step3Title);
            this.updateHTML(steps[2].querySelector('p'), t.step3Description);
            const step3Items = steps[2].querySelectorAll('ul li');
            if (step3Items.length >= 4) {
                step3Items[0].textContent = t.step3Item1;
                step3Items[1].textContent = t.step3Item2;
                step3Items[2].textContent = t.step3Item3;
                step3Items[3].textContent = t.step3Item4;
            }
            
            // Step 4
            this.updateHTML(steps[3].querySelector('h3'), t.step4Title);
            this.updateHTML(steps[3].querySelector('p'), t.step4Description.replace(/(SadeleÅŸtirilmiÅŸ|anlamlÄ±|Simplified|meaningful)/g, '<strong>$1</strong>'));
            
            // Step 5
            this.updateHTML(steps[4].querySelector('h3'), t.step5Title);
            this.updateHTML(steps[4].querySelector('p'), t.step5Description.replace(/(kaynaklarla desteklenmiÅŸ|supported by sources)/g, '<strong>$1</strong>'));
        }
        
        // Why free section
        this.updateHTML('#why-free h2', t.whyFreeTitle);
        const whyFreePs = document.querySelectorAll('#why-free .why-free-content p');
        if (whyFreePs.length >= 4) {
            whyFreePs[0].innerHTML = t.whyFreeP1.replace(/(merak ettiÄŸim bir yolculuk|Ã¶ÄŸrenme aracÄ±m|journey I'm curious about|learning tool)/g, '<strong>$1</strong>');
            whyFreePs[1].textContent = t.whyFreeP2;
            whyFreePs[2].innerHTML = t.whyFreeP3.replace(/(kendimi geliÅŸtiriyor|paylaÅŸmanÄ±n huzurunu|develop myself|peace of sharing)/g, '<strong>$1</strong>').replace(/(paylaÅŸmanÄ±n huzurunu|peace of sharing)/g, '<em>$1</em>');
            whyFreePs[3].innerHTML = t.whyFreeP4.replace(/(Almaâ€“verme dengesi|give-and-take balance)/g, '<strong>"$1"</strong>');
        }
        
        // Appointment section
        this.updateHTML('#appointment h2', t.appointmentTitle);
        this.updateHTML('#appointment h3', t.appointmentSubtitle);
        const appointmentInfo = document.querySelector('.appointment-info p');
        if (appointmentInfo) {
            appointmentInfo.innerHTML = `<strong>${this.currentLanguage === 'tr' ? 'SalÄ± & Cuma gÃ¼nleri' : 'Tuesday & Friday'}</strong> â€” <span class="medical-badge">${this.currentLanguage === 'tr' ? 'Ãœcretsiz' : 'Free'}</span> & <span class="medical-badge">Online</span>`;
        }
        const appointmentNote = document.querySelector('.appointment-note small');
        if (appointmentNote) {
            appointmentNote.innerHTML = t.appointmentNote.replace(/(SÄ±nÄ±rlÄ± kontenjan|Limited quota)/g, '<strong>$1</strong>');
        }
        
        // FAQ section
        this.updateHTML('#faq h2', t.faqTitle);
        const faqItems = document.querySelectorAll('.faq-item');
        if (faqItems.length >= 3) {
            // FAQ 1
            this.updateHTML(faqItems[0].querySelector('h3'), t.faq1Question);
            faqItems[0].querySelector('p').innerHTML = t.faq1Answer.replace(/(HayÄ±r|Bilgilendirici rehberliktir|No|informational guidance)/g, '<strong>$1</strong>').replace(/(Bilgilendirici rehberliktir|informational guidance)/g, '<em>$1</em>');
            
            // FAQ 2
            this.updateHTML(faqItems[1].querySelector('h3'), t.faq2Question);
            faqItems[1].querySelector('p').innerHTML = t.faq2Answer.replace(/(Evet|anonimleÅŸtirilmiÅŸ vaka Ã¶zetinde|izinle|Yes|anonymized case summary|with your permission)/g, '<strong>$1</strong>').replace(/(anonimleÅŸtirilmiÅŸ vaka Ã¶zetinde|anonymized case summary)/g, '<em>$1</em>');
            
            // FAQ 3
            this.updateHTML(faqItems[2].querySelector('h3'), t.faq3Question);
            faqItems[2].querySelector('p').innerHTML = t.faq3Answer.replace(/(Karar veremediÄŸiniz sÃ¼reÃ§ler|belirsiz raporlar|ikinci gÃ¶rÃ¼ÅŸler|processes you can't decide on|unclear reports|second opinions)/g, '<strong>$1</strong>').replace(/(belirsiz raporlar|unclear reports)/g, '<em>$1</em>');
        }
        
        // Schema.org structured data
        this.updateSchemaData(t);
    }
    
    updateText(selector, text) {
        const element = typeof selector === 'string' ? document.querySelector(selector) : selector;
        if (element) {
            element.textContent = text;
        }
    }
    
    updateHTML(selector, html) {
        const element = typeof selector === 'string' ? document.querySelector(selector) : selector;
        if (element) {
            element.innerHTML = html;
        }
    }
    
    updateMetaTag(name, content) {
        let selector = `meta[name="${name}"]`;
        if (name.startsWith('og:') || name.startsWith('twitter:')) {
            selector = `meta[property="${name}"]`;
        }
        
        const meta = document.querySelector(selector);
        if (meta) {
            meta.setAttribute('content', content);
        }
    }
    
    updateLanguageSelector() {
        const currentBtn = document.querySelector('.lang-current');
        const options = document.querySelectorAll('.lang-option');
        
        if (currentBtn) {
            const t = translations[this.currentLanguage];
            currentBtn.innerHTML = `
                <span class="lang-flag">${this.currentLanguage === 'tr' ? 'ðŸ‡¹ðŸ‡·' : 'ðŸ‡ºðŸ‡¸'}</span>
                <span class="lang-text">${t.currentLanguage}</span>
                <span class="lang-arrow">â–¼</span>
            `;
        }
        
        options.forEach(option => {
            const lang = option.dataset.lang;
            option.setAttribute('aria-current', lang === this.currentLanguage ? 'true' : 'false');
        });
    }
    
    updateURL() {
        const url = new URL(window.location);
        if (this.currentLanguage !== 'tr') {
            url.searchParams.set('lang', this.currentLanguage);
        } else {
            url.searchParams.delete('lang');
        }
        
        window.history.replaceState({}, '', url);
    }
    
    updateSchemaData(t) {
        const schemaScript = document.querySelector('script[type="application/ld+json"]');
        if (schemaScript) {
            const schemaData = {
                "@context": "https://schema.org",
                "@type": "MedicalBusiness",
                "name": t.schemaName,
                "description": t.schemaDescription,
                "provider": {
                    "@type": "Person",
                    "name": "Dr. SadÄ±k BarÄ±ÅŸ AdÄ±gÃ¼zel",
                    "jobTitle": t.schemaJobTitle
                },
                "url": "https://baro007.github.io/tibbidedektif/",
                "serviceType": t.schemaServiceType,
                "areaServed": t.schemaAreaServed,
                "availableLanguage": this.currentLanguage,
                "priceRange": t.schemaPriceRange
            };
            
            schemaScript.textContent = JSON.stringify(schemaData, null, 4);
        }
    }
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    window.languageSystem = new LanguageSystem();
});

// Export for module usage
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageSystem };
} 